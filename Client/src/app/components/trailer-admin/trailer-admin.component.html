
<div class="row">
  <div class="col-md-4 mx-auto">
    <div class="card border-primary mb-3">
      <div class="card-header">
        Agregar Trailer
      </div>
      <div class="card-body">
        <form #trailerForm="ngForm" (submit)="createTrailer(trailerForm)"  action="/trailer/edit/{{trailer._id}}" method="POST">
          <input type="hidden" name="_id" #_id="ngModel" [(ngModel)]="trailerService.selectedTrailer._id || trailer._id">
            <div class="form-floating mb-3">
            <input  id="floatingInput" type="text" [(ngModel)]="trailerService.selectedTrailer.name || trailer.name" name="name" #name="ngModel" class="form-control" placeholder="Titulo" required autofocus>
            <label for="floatingInput">Titulo</label>
          </div>
          <div class="form-floating mb-3">
            <textarea  name="description" #name="ngModel" [(ngModel)]="trailerService.selectedTrailer.description || trailer.description" placeholder="Description" rows="3" class="form-control"></textarea>
           </div>
          <div class="form-floating mb-3">
            <select placeholder="Genero"id="trailer.category" name="trailer.category" [(ngModel)]="trailerService.selectedTrailer.category || trailer.category" class="form-select">
              <option value="" disabled selected>Género</option>
              <option value="Acción" value="Acción">Acción</option>
              <option value="Animación" value="Animación">Animación</option>
              <option value="Ciencia Ficcion" value="Ciencia Ficcion">Ciencia Ficcion</option>
              <option value="Comedia" value="Comedia">Comedia</option>
              <option value="Documental" value="Documental">Documental</option>
              <option value="Drama" value="Drama">Drama</option>
              <option value="Fantasía" value="Fantasía">Fantasía</option>
              <option value="Musical" value="Musical">Musical</option>
              <option value="Romance" value="Romance">Romance</option>
              <option value="Terror" value="Terror">Terror</option>
              </select>
          </div>
          <div class="form-floating mb-3">
            <input  id="floatingInput" type="text" [(ngModel)]="trailerService.selectedTrailer.director || trailer.director" name="director" #name="ngModel" class="form-control" placeholder="Director"  required >
            <label for="floatingInput">Director</label>
          </div>
          <div class="form-floating mb-3">
            <input  id="floatingInput" [(ngModel)]="trailerService.selectedTrailer.actors || trailer.actors" name="actors"  #name="ngModel" class="form-control" placeholder="Actores" required >
            <label for="floatingInput">Actores</label>
          </div>
          <div class="form-floating mb-3">
            <input  id="floatingInput"  type="number" [(ngModel)]="trailerService.selectedTrailer.year || trailer.year" name="year" #name="ngModel"class="form-control" placeholder="Año" required  min="1980" max="2023" step="1" value="1980"  >
            <label for="floatingInput">Año</label>
          </div>
          <div class="form-floating mb-3">
            <input  id="floatingInput" type="url" [(ngModel)]="trailerService.selectedTrailer.link || trailer.link" name="link" #name="ngModel"class="form-control" placeholder="Link" required >
            <label for="floatingInput">Link</label>
          </div>
          <div class="form-floating mb-3">
            <input id="floatingInput" type="text" [(ngModel)]="trailerService.selectedTrailer.image || trailer.image" name="image" #name="ngModel" class="form-control" placeholder="Imagen" required >
            <label for="floatingInput">Imagen</label>
          </div>

          <div class="form-group mt-3">
          <button type="submit" class="btn btn-primary mt-3 container "  routerLinkActive="router-link-active" >Guardar</button>

        </div>
        </form>
      </div>
    </div>
  </div>

  <div class=" col-md-4 mx-auto">
    <div class="card text-white bg-dark mb-3 border-light  card-body">
      <img [src]="trailer.image == '' ? 'https://cdn.dribbble.com/users/1761902/screenshots/8527483/media/9e88b2c1b2f4404045326469fbcc5a8b.gif' : trailer.image" class="card-img-top">
      <h3>{{trailer.name == '' ? '' : trailerService.selectedTrailer.name || trailer.name}}</h3>
      <p>{{trailer.category == '' ? '' : trailerService.selectedTrailer.category || trailer.category}}</p>
      <p>{{trailer.description == '' ? '': trailerService.selectedTrailer.description || trailer.description}}</p>
      <p>{{trailer.director == '' ? '': trailerService.selectedTrailer.director || trailer.director}}</p>
      <p>{{trailer.actors == '' ? '': trailerService.selectedTrailer.actors || trailer.actors}}</p>
      <p>{{trailer.year == '' ? '': trailerService.selectedTrailer.year || trailer.year}}</p>
      <p>{{trailer.link == '' ? '': trailerService.selectedTrailer.link || trailer.link}}</p>
    </div>
  </div>
</div>

<div class="col-md-12 container my-3">
<table class="table table-striped table-primary ">
  <thead >
    <tr class="table-dark">
    <th scope="col">Titulo</th>
    <th scope="col">Director</th>
    <th scope="col">Actores</th>
    <th scope="col">Género</th>
    <th scope="col">Año</th>
    <th scope="col">Editar</th>
    <th scope="col">Eliminar</th>
  </tr>
  </thead>
  <tbody>
    <tr *ngFor="let trailer of trailers" >
      <td>{{trailer.name}}</td>
      <td>{{trailer.director}}</td>
      <td>{{trailer.actors}}</td>
      <td>{{trailer.category}}</td>
      <td>{{trailer.year}}</td>
      <td>
        <a class="btn btn-secondary btn-sm" (click)="editTrailer(trailer)">
          <i class="material-icons">edit</i>
        </a>
      </td>
       <td>
        <a class="btn btn-danger btn-sm" (click)="deleteTrailer(trailer._id)" >
          <i class="material-icons">delete</i>
        </a>
      </td>
    </tr>
  </tbody>
</table>
</div>


